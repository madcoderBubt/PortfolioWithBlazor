@page "/contact"
@using PortfolioDotNet.Services
@using PortfolioDotNet.Models
@using System.ComponentModel.DataAnnotations
@inject PortfolioDataService DataService

<PageTitle>Contact - Get In Touch</PageTitle>

<div class="page-header">
    <h1 class="page-title">Get In Touch</h1>
    <p class="page-subtitle">Let's work together</p>
</div>

<section class="contact-section">
    <div class="container">
        <div class="contact-grid">
            <!-- Contact Information -->
            <div class="contact-info">
                <h2>Contact Information</h2>
                <p>Feel free to reach out through any of the following channels:</p>

                <div class="contact-methods">
                    <div class="contact-method">
                        <div class="contact-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="contact-details">
                            <h3>Email</h3>
                            <a href="mailto:@profile.Email">@profile.Email</a>
                            <a href="mailto:@profile.Email2">@profile.Email2</a>
                        </div>
                    </div>

                    <div class="contact-method">
                        <div class="contact-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div class="contact-details">
                            <h3>Phone</h3>
                            <a href="tel:@profile.Phone">@profile.Phone</a>
                            <a href="tel:@profile.Phone2">@profile.Phone2</a>
                        </div>
                    </div>

                    <div class="contact-method">
                        <div class="contact-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="contact-details">
                            <h3>Location</h3>
                            <p>@profile.Location</p>
                        </div>
                    </div>

                    <div class="contact-method">
                        <div class="contact-icon">
                            <i class="fab fa-skype"></i>
                        </div>
                        <div class="contact-details">
                            <h3>Skype</h3>
                            <p>@profile.Social.Skype</p>
                        </div>
                    </div>
                </div>

                <div class="social-links-contact">
                    <h3>Connect on Social Media</h3>
                    <div class="social-icons">
                        @if (!string.IsNullOrEmpty(profile.Social.LinkedIn))
                        {
                            <a href="@profile.Social.LinkedIn" target="_blank" title="LinkedIn">
                                <i class="fab fa-linkedin"></i>
                            </a>
                        }
                        @if (!string.IsNullOrEmpty(profile.Social.GitHub))
                        {
                            <a href="@profile.Social.GitHub" target="_blank" title="GitHub">
                                <i class="fab fa-github"></i>
                            </a>
                        }
                        @if (!string.IsNullOrEmpty(profile.Social.Twitter))
                        {
                            <a href="@profile.Social.Twitter" target="_blank" title="Twitter">
                                <i class="fab fa-twitter"></i>
                            </a>
                        }
                        @if (!string.IsNullOrEmpty(profile.Social.Facebook))
                        {
                            <a href="@profile.Social.Facebook" target="_blank" title="Facebook">
                                <i class="fab fa-facebook"></i>
                            </a>
                        }
                        @if (!string.IsNullOrEmpty(profile.Social.HackerRank))
                        {
                            <a href="@profile.Social.HackerRank" target="_blank" title="HackerRank">
                                <i class="fab fa-hackerrank"></i>
                            </a>
                        }
                        @if (!string.IsNullOrEmpty(profile.Social.LeetCode))
                        {
                            <a href="@profile.Social.LeetCode" target="_blank" title="LeetCode">
                                <i class="fas fa-code"></i>
                            </a>
                        }
                    </div>
                </div>
            </div>

            <!-- Contact Form -->
            <div class="contact-form-container">
                <h2>Send a Message</h2>
                
                @if (isSubmitted)
                {
                    <div class="alert alert-success">
                        <i class="fas fa-check-circle"></i>
                        <p>Thank you for your message! I'll get back to you soon.</p>
                    </div>
                }
                else
                {
                    <EditForm Model="@contactForm" OnValidSubmit="HandleSubmit" class="contact-form">
                        <DataAnnotationsValidator />
                        
                        <div class="form-group">
                            <label for="name">Name *</label>
                            <InputText id="name" @bind-Value="contactForm.Name" class="form-control" placeholder="Your Name" />
                            <ValidationMessage For="@(() => contactForm.Name)" />
                        </div>

                        <div class="form-group">
                            <label for="email">Email *</label>
                            <InputText id="email" type="email" @bind-Value="contactForm.Email" class="form-control" placeholder="your.email@example.com" />
                            <ValidationMessage For="@(() => contactForm.Email)" />
                        </div>

                        <div class="form-group">
                            <label for="subject">Subject *</label>
                            <InputText id="subject" @bind-Value="contactForm.Subject" class="form-control" placeholder="Subject" />
                            <ValidationMessage For="@(() => contactForm.Subject)" />
                        </div>

                        <div class="form-group">
                            <label for="message">Message *</label>
                            <InputTextArea id="message" @bind-Value="contactForm.Message" class="form-control" rows="5" placeholder="Your message..." />
                            <ValidationMessage For="@(() => contactForm.Message)" />
                        </div>

                        <button type="submit" class="btn btn-primary btn-block">
                            <i class="fas fa-paper-plane"></i> Send Message
                        </button>
                    </EditForm>
                }
            </div>
        </div>
    </div>
</section>

@code {
    private Profile profile = new();
    private ContactForm contactForm = new();
    private bool isSubmitted = false;

    protected override async Task OnInitializedAsync()
    {
        var data = await DataService.GetPortfolioDataAsync();
        profile = data.Profile;
    }

    private void HandleSubmit()
    {
        // In a real application, you would send this data to an API or email service
        // For now, we'll just show a success message
        isSubmitted = true;
        
        // Reset form after 5 seconds
        Task.Delay(5000).ContinueWith(_ =>
        {
            isSubmitted = false;
            contactForm = new ContactForm();
            InvokeAsync(StateHasChanged);
        });
    }

    public class ContactForm
    {
        [Required(ErrorMessage = "Name is required")]
        public string Name { get; set; } = string.Empty;

        [Required(ErrorMessage = "Email is required")]
        [EmailAddress(ErrorMessage = "Invalid email address")]
        public string Email { get; set; } = string.Empty;

        [Required(ErrorMessage = "Subject is required")]
        public string Subject { get; set; } = string.Empty;

        [Required(ErrorMessage = "Message is required")]
        [MinLength(10, ErrorMessage = "Message must be at least 10 characters")]
        public string Message { get; set; } = string.Empty;
    }
}
